//
//  ViewController.swift
//  WaveForm
//
//  Created by David Kyslenko on 31.10.2022.
//

import UIKit
import SnapKit

class ViewController: UIViewController {
    private let playerUnderlyView = UIView()
    
    private lazy var waveView: ScrollableWaveformView = {
        return ScrollableWaveformView()
    }()

    override func viewDidLoad() {
        super.viewDidLoad()
        view.backgroundColor = UIColor(hex: "1A1B1E")

        view.addSubview(playerUnderlyView)
        playerUnderlyView.layer.cornerRadius = 10
        playerUnderlyView.backgroundColor = .white
        playerUnderlyView.snp.makeConstraints { make in
            make.top.equalTo(view.safeAreaLayoutGuide)
            make.left.equalToSuperview().offset(45)
            make.right.equalToSuperview().inset(45)
            
            let height = self.calculateHeightMultiplier(508)
            make.height.equalTo(height)
        }
        
        view.addSubview(waveView)
        waveView.snp.makeConstraints { make in
            make.top.equalTo(playerUnderlyView.snp.bottom).offset(30)
            make.left.right.equalToSuperview()
            make.height.equalTo(200)
        }
        
        let outputArray : [Float] = [0.0011449468, 0.17562689, 0.53277385, 0.43957958, 0.4216129, 0.3487316, 0.33109832, 0.27778646, 0.19789591, 0.5910053, 0.5724374, 0.43031958, 0.34568316, 0.32808903, 0.34965852, 0.24711175, 0.34822193, 0.4680162, 0.3876425, 0.3543209, 0.48178053, 0.47633025, 0.3544776, 0.46962157, 0.43590292, 0.44875666, 0.4762248, 0.50795865, 0.49072957, 0.50158006, 0.3803572, 0.1849201, 0.07231835, 0.07703628, 0.5029864, 0.5129749, 0.4772045, 0.51233464, 0.56243104, 0.29381353, 0.19546358, 0.4297571, 0.4554019, 0.3563627, 0.38987735, 0.33978358, 0.3862026, 0.20918123, 0.18906787, 0.23560299, 0.36130098, 0.63298565, 0.4606087, 0.24264018, 0.32002646, 0.31874698, 0.29047057, 0.2386685, 0.42174193, 0.4926953, 0.45525074, 0.30113378, 0.32226944, 0.5285957, 0.31446445, 0.20073768, 0.49771833, 0.36949462, 0.3519828, 0.31646124, 0.3698072, 0.5857083, 0.65142274, 0.5404138, 0.501662, 0.48717982, 0.37773496, 0.36142918, 0.39143807, 0.4084323, 0.75115275, 0.48159733, 0.54274356, 0.57699317, 0.87909186, 0.9404413, 0.5448794, 0.15843424, 0.76646477, 0.8075089, 0.477517, 0.35558122, 0.4651734, 0.38889354, 0.309708, 0.30097264, 0.23747058, 0.60218984, 0.5410292, 0.65729266, 0.48810962, 0.6493721, 0.42132267, 0.4052924, 0.39374146, 0.8448574, 0.66741484, 0.73485637, 0.70311594, 0.6063785, 0.41579553, 0.23619393, 0.28705987, 0.7316599, 0.5950744, 0.60751015, 0.49817464, 0.54032403, 0.44958863, 0.67554075, 0.4721008, 0.4601857, 0.40003344, 0.34217155, 0.3886665, 0.41912165, 0.40511897, 0.5945235, 0.29405135, 0.44781062, 0.5247386, 0.5655725, 0.578643, 0.5955737, 0.7030426, 0.8695651, 0.7632806, 0.8171382, 0.8930994, 0.64827484, 0.2300312, 0.29727906, 0.5331445, 0.49335906, 0.49318478, 0.21695487, 0.32397377, 0.4935044, 0.50410634, 0.58347714, 0.5307736, 0.5183493, 0.21911411, 0.23631711, 0.25293562, 0.48159832, 0.44929093, 0.564063, 0.54401284, 0.4396556, 0.18485504, 0.3967178, 0.35918486, 0.40750536, 0.44241592, 0.40902433, 0.36762723, 0.42972633, 0.6143223, 0.6603292, 0.40589088, 0.39685482, 0.29137728, 0.3405061, 0.39509854, 0.5219259, 0.6828607, 0.6686322, 0.6694421, 0.5499931, 0.4787989, 0.4417946, 0.5140329, 0.58529824, 0.62752086, 0.77030414, 0.69953156, 0.70807594, 0.68193257, 0.7195913, 0.48395774, 0.46351966, 0.5962906, 0.8162568, 0.71182334, 0.62168413, 0.6388217, 0.61881846, 0.47872794, 0.42176953, 0.5033198, 0.37552953, 0.5374026, 0.6239186, 0.5971715, 0.58906305, 0.52876574, 0.7172256, 0.5309179, 0.54084337, 0.57333237, 0.55003744, 0.84352905, 0.693395, 0.5063281, 0.37277564, 0.69090927, 0.5712803, 0.49162626, 0.47544774, 0.73134, 0.73999155, 0.5404615, 0.37035835, 0.5783897, 0.6933475, 0.78197753, 0.84785956, 0.9299493, 0.96126777, 0.86495435, 0.33521733, 0.8277702, 0.9511227, 0.7519359, 0.366038, 0.5860413, 0.70861703, 0.7056629, 0.6550909, 0.7132809, 0.6977965, 1.0798125, 1.0054896, 0.9482379, 0.50042766, 1.0139492, 0.54476535, 0.41554964, 0.36172795, 0.8046437, 0.57631314, 0.5298887, 0.8892129, 0.82994646, 0.6434544, 0.36035633, 0.3133026, 0.31419617, 0.58276165, 0.41204643, 0.38568294, 0.32397553, 0.31329298, 0.2748217, 0.65696275, 0.3719996, 0.48110908, 0.3341045, 0.20695776, 0.24887788, 0.28684652, 0.35253718, 0.48720086, 0.31461403, 0.45036525, 0.5038505, 0.42267692, 0.48828292, 0.44022253, 0.65666, 0.86767155, 0.75549805, 0.8400407, 0.8662526, 0.68695134, 0.2130046, 0.50525653, 0.76343346, 0.413766, 0.3462561, 0.22808076, 0.27898973, 0.42665738, 0.45500052, 0.44924513, 0.5640304, 0.60036445, 0.28260064, 0.24542953, 0.15601155, 0.36994058, 0.40354922, 0.40278405, 0.55390376, 0.53946805, 0.18993968, 0.44617134, 0.31214595, 0.33885005, 0.42745185, 0.5432742, 0.38935676, 0.29407567, 0.46750337, 0.71712035, 0.39343208, 0.37931213, 0.35492414, 0.32752058, 0.3469746, 0.40599024, 0.40200716, 0.34398523, 0.27837473, 0.20193006, 0.07919361, 0.40705213, 0.19633646, 0.2650717, 0.5221039, 0.5584012, 0.43555042, 0.40145484, 0.3611437, 0.2940644, 0.2567214, 0.3502013, 0.6006325, 0.45064387, 0.45747077, 0.35308412, 0.36080524, 0.30444592, 0.23056944, 0.3772359, 0.4417747, 0.32391238, 0.28222921, 0.37183383, 0.46226728, 0.43885505, 0.42862025, 0.48491183, 0.4084634, 0.32995433, 0.24905796, 0.20965397, 0.15889305, 0.1891396, 0.36306015, 0.6340004, 0.58538496, 0.49306795, 0.36726, 0.41148758, 0.3308613, 0.23117329, 0.56823, 0.6209939, 0.50801903, 0.47786292, 0.41159236, 0.344889, 0.30334732, 0.20705101, 0.3798033, 0.4328422, 0.34587896, 0.32157168, 0.44484022, 0.43175805, 0.42519253, 0.37882832, 0.5230579, 0.41333377, 0.15226862, 0.41861817, 0.51840997, 0.6074061, 0.56752664, 0.5729152, 0.7030126, 0.75427365, 0.44677243, 0.5396347, 0.54497695, 0.5338198, 0.4362467, 0.42866617, 0.36469126, 0.31995884, 0.25407514, 0.15736584, 0.033191636, 0.009753383, 0.0037238738, 0.0018503958, 0.0014343624, 0.00076731, 0.00043904042, 0.0004147013, 0.00041877516, 0.000405606, 0.0]
        
        self.waveView.drawWaveformView(values: outputArray)
    }


}


